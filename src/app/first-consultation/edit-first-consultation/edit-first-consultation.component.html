<main class="dialog-wrapper" *ngIf="client && firstConsultation">
  <div class="close-section">
    <button mat-icon-button class="not-mobile close-btn" (click)="closeDialog()" type="button">
      <i class="fa__icon fas fa-times"></i>
    </button>

    <button class="mobile text-link close-btn" (click)="closeDialog()" type="button">
      <i class="mobile fas fa-arrow-left"></i> {{ 'global.buttons.back' | translate }}
    </button>
  </div>

  <section class="navigation">
    <div class="navigation__link-container">
      <h4 class="anchor-link" (click)="handleNavClick($event)" data-scroll-target="generalone"
        [class.valid]="basicDataForm.valid">
        {{ 'pages.first_consultation.steps.general_1' | translate }}
        <i class="fa__icon far fa-check-circle"></i>
      </h4>
    </div>
    <div class="navigation__link-container">
      <h4 class="anchor-link" (click)="handleNavClick($event)" data-scroll-target="habits"
        [class.valid]="habitForm.valid">
        {{ 'pages.first_consultation.steps.habits' | translate }}
        <i class="fa__icon far fa-check-circle"></i>
      </h4>
      <ul>
        <li>
          <a (click)="handleNavClick($event)" data-scroll-target="habits-general">
            {{ 'pages.first_consultation.habits.general' | translate }}
          </a>
        </li>
        <li>
          <a (click)="handleNavClick($event)" data-scroll-target="habits-sleeping">
            {{ 'pages.first_consultation.habits.sleeping' | translate }}
          </a>
        </li>
        <li>
          <a (click)="handleNavClick($event)" data-scroll-target="habits-eating">
            {{ 'pages.first_consultation.habits.eating' | translate }}
          </a>
        </li>
        <li>
          <a (click)="handleNavClick($event)" data-scroll-target="habits-work">
            {{ 'pages.first_consultation.habits.work' | translate }}
          </a>
        </li>
      </ul>
    </div>
    <div class="navigation__link-container">
      <h4 class="anchor-link" (click)="handleNavClick($event)" data-scroll-target="bodyfunctions"
        [class.valid]="bodyFunctionsForm.valid">
        {{ 'pages.first_consultation.steps.body_functions' | translate }}
        <i class="fa__icon far fa-check-circle"></i>
      </h4>
      <ul>
        <li>
          <a (click)="handleNavClick($event)" data-scroll-target="bodyfunctions-diuresis">
            {{ 'pages.first_consultation.body_functions.diuresis' | translate }}
          </a>
        </li>
        <li>
          <a (click)="handleNavClick($event)" data-scroll-target="bodyfunctions-bowel">
            {{ 'pages.first_consultation.body_functions.bowel_movement' | translate }}
          </a>
        </li>
        <li>
          <a (click)="handleNavClick($event)" data-scroll-target="bodyfunctions-appetite">
            {{ 'pages.first_consultation.body_functions.appetite' | translate }}
          </a>
        </li>
        <li *ngIf="basicDataForm['controls'].sex.value === 'Feminine'">
          <a (click)="handleNavClick($event)" data-scroll-target="bodyfunctions-female"> 
            {{ 'pages.first_consultation.body_functions.female.title' | translate }}
          </a>
        </li>
        <li>
          <a (click)="handleNavClick($event)" data-scroll-target="bodyfunctions-sleep">
            {{ 'pages.first_consultation.body_functions.sleep' | translate }}
          </a>
        </li>
      </ul>
    </div>
    <div class="navigation__link-container">
      <h4 class="anchor-link" (click)="handleNavClick($event)" data-scroll-target="generaltwo"
        [class.valid]="generalDataForm.valid">
        {{ 'pages.first_consultation.steps.general_2' | translate }}
        <i class="fa__icon far fa-check-circle"></i>
      </h4>
      <ul>
        <li>
          <a (click)="handleNavClick($event)" data-scroll-target="generaltwo-conditions">
            {{ 'pages.first_consultation.general_info_2.conditions_title' | translate }}
          </a>
        </li>
        <li>
          <a (click)="handleNavClick($event)" data-scroll-target="generaltwo-dinner">
            {{ 'pages.first_consultation.general_info_2.dinner' | translate }}
          </a>
        </li>
        <li>
          <a (click)="handleNavClick($event)" data-scroll-target="generaltwo-activities">
            {{ 'pages.first_consultation.general_info_2.activities' | translate }}
          </a>
        </li>
        <li>
          <a (click)="handleNavClick($event)" data-scroll-target="generaltwo-weekends">
            {{ 'pages.first_consultation.general_info_2.weekends' | translate }}
          </a>
        </li>
      </ul>
    </div>
    <div class="navigation__link-container">
      <h4 class="anchor-link" (click)="handleNavClick($event)" data-scroll-target="notes">
        {{ 'global.words.notes' | translate }}
        <ng-container *ngIf="noteForm['controls'].specialistNotes.dirty">
          <i class="fa__icon far fa-check-circle"></i>
        </ng-container>
      </h4>
    </div>
  </section>

  <mat-horizontal-stepper #stepper>
    <mat-step [stepControl]="basicDataForm">
      <ng-template matStepLabel>{{ 'pages.first_consultation.steps.general_1' | translate }}</ng-template>
      
      <div class="title-area" id="generalone">
        <h3>{{ 'pages.first_consultation.general_info_1.step_title' | translate }}</h3>
        <p class="card-text">
          {{ 'pages.first_consultation.general_info_1.step_intro' | translate }}
        </p>
      </div>

      <form [formGroup]="basicDataForm">

        <mat-form-field appearance="standard" floatLabel="always">
          <mat-label>{{ 'pages.first_consultation.general_info_1.main_goal' | translate }}</mat-label>
          <textarea type="text" matInput formControlName="mealplanMainGoal"
            placeholder="{{ 'global.form.short_summary' | translate }}" 
            matTextareaAutosize autofocus="off" autocomplete="off" required>
          </textarea>
          <mat-error class="input-error" *ngIf="!basicDataForm['controls'].mealplanMainGoal.valid">
            {{ 'global.form.errors.required' | translate }}</mat-error>
        </mat-form-field>

        <mat-form-field appearance="standard" floatLabel="always">
          <mat-label>{{ 'pages.first_consultation.general_info_1.address' | translate }}</mat-label>
          <textarea type="text" matInput formControlName="address"
          placeholder="{{ 'pages.first_consultation.general_info_1.address_placeholder' | translate }}" 
          matTextareaAutosize autofocus="off" autocomplete="off" required>
          </textarea>
          <mat-error class="input-error" *ngIf="!basicDataForm['controls'].address.valid">{{ 'global.form.errors.required' | translate }}</mat-error>
        </mat-form-field>

        <mat-form-field class="date-picker" appearance="standard" floatLabel="always">
          <mat-label>{{ 'pages.first_consultation.general_info_1.birth_date' | translate }}</mat-label>
          <input matInput formControlName="birthDate" [matDatepicker]="datePickerOne"
          placeholder="{{firstConsultation.basicData.birthDate.toDate() | date: 'dd/MM/yyyy'}}">
          <mat-datepicker-toggle [for]="datePickerOne"></mat-datepicker-toggle>
          <mat-datepicker #datePickerOne></mat-datepicker>
          <mat-hint *ngIf="basicDataForm['controls'].birthDate.dirty">
            <ng-container *ngIf="age < 0">
              {{ 'pages.first_consultation.general_info_1.born_future' | translate }}
            </ng-container>
            <ng-container *ngIf="age >= 0">
              {{ 'pages.first_consultation.general_info_1.you_age_old' | translate: {age: age} }}
            </ng-container>
          </mat-hint>
        </mat-form-field>

        <mat-form-field appearance="standard" floatLabel="always" class="number">
          <mat-label>{{ 'pages.first_consultation.general_info_1.height' | translate }}</mat-label>
          <input type="number"formControlName="height" matInput placeholder="1.85" autocomplete="off" required> <span class="specifier">
            {{ 'global.sizes.meters' | translate }}
          </span>
          <mat-error class="input-error" *ngIf="!basicDataForm['controls'].height.valid">{{ 'global.form.errors.required' | translate }}</mat-error>
        </mat-form-field>

        <div class="phone-number">
          <mat-form-field appearance="standard" floatLabel="always" class="number">
            <mat-label>{{ 'global.form.area_code' | translate }}</mat-label>
            <input type="number"formControlName="phoneAreaCode" matInput placeholder="{{firstConsultation.basicData.phoneNumber.areaCode}}" 
              autocomplete="off" required>
          </mat-form-field>
          <mat-form-field appearance="standard" floatLabel="always">
            <mat-label>{{ 'global.form.phone_number' | translate }}</mat-label>
            <input type="number"formControlName="phoneNumber" matInput placeholder="{{firstConsultation.basicData.phoneNumber.number}}" 
              autocomplete="off" required>
          </mat-form-field>
        </div>

        <mat-form-field appearance="standard" floatLabel="always">
          <mat-label>{{ 'global.form.gender' | translate }}</mat-label>
          <mat-select matInput placeholder="{{ 'global.form.pick_appropriate' | translate }}" formControlName="sex"
          autocomplete="off" panelClass="dropdown-regular" required>
            <mat-option value="Masculine">{{ 'global.words.masculine' | translate }}</mat-option>
            <mat-option value="Feminine">{{ 'global.words.feminine' | translate }}</mat-option>
            <mat-option value="Other">{{ 'global.words.other' | translate }}</mat-option>
          </mat-select>
          <mat-error class="input-error" *ngIf="!basicDataForm['controls'].sex.valid">{{ 'global.form.errors.required' | translate }}</mat-error>
        </mat-form-field>
      </form>

      <section class="btn-area-one">
        <button type="button" class="dialog-button" matStepperNext>{{ 'global.buttons.next' | translate }}</button>
      </section>
    </mat-step>

    <mat-step [stepControl]="firstConsultationForm">
      <ng-template matStepLabel>
        {{ 'pages.first_consultation.steps.habits' | translate }}
      </ng-template>

      <div class="title-area" id="habits">
        <h3>🚴 {{ 'pages.first_consultation.steps.habits' | translate }}</h3>
        <p class="card-text">
          {{ 'pages.first_consultation.habits.step_intro' | translate }}
        </p>
      </div>

      <form [formGroup]="habitForm">
        <div class="radio-form-field">
          <label class="radio-form-label">Do you drink alcohol?</label>
          <mat-radio-group
            class="radio-button-group"
            formControlName="alcohol">
            <mat-radio-button class="radio-button" value="yes">{{ 'global.words.yes' | translate }}</mat-radio-button>
            <mat-radio-button class="radio-button" value="no">{{ 'global.words.no' | translate }}</mat-radio-button>
          </mat-radio-group>

          <ng-container *ngIf="habitForm['controls'].alcohol.value === 'global.words.yes'">
            <mat-form-field appearance="standard" floatLabel="always" class="number">
              <mat-label>
                {{ 'pages.first_consultation.habits.form.cups_a_day' | translate }}
              </mat-label>
              <input type="number"formControlName="alcoholNote" matInput placeholder="5" autocomplete="off" required>
              <mat-error class="input-error" *ngIf="!habitForm['controls'].alcoholNote.valid">{{ 'global.form.errors.required' | translate }}</mat-error>
            </mat-form-field>
          </ng-container>
        </div>
        
        <div class="radio-form-field">
          <label class="radio-form-label">
            {{ 'pages.first_consultation.habits.form.smoke' | translate }}
          </label>
          <mat-radio-group
            class="radio-button-group"
            formControlName="smoke">
            <mat-radio-button class="radio-button" value="yes">{{ 'global.words.yes' | translate }}</mat-radio-button>
            <mat-radio-button class="radio-button" value="no">{{ 'global.words.no' | translate }}</mat-radio-button>
          </mat-radio-group>

          <ng-container *ngIf="habitForm['controls'].smoke.value === 'global.words.yes'">
            <mat-form-field appearance="standard" floatLabel="always" class="number">
              <mat-label>{{ 'pages.first_consultation.habits.form.packs_a_week' | translate }}</mat-label>
              <input type="number"formControlName="smokeNote" matInput placeholder="4" autocomplete="off" required>
              <mat-error class="input-error" *ngIf="!habitForm['controls'].smokeNote.valid">{{ 'global.form.errors.required' | translate }}</mat-error>
            </mat-form-field>
          </ng-container>
        </div>

        <div class="radio-form-field">
          <label class="radio-form-label">
            {{ 'pages.first_consultation.habits.form.take_drugs' | translate }}
          </label>
          <mat-radio-group
            class="radio-button-group"
            formControlName="drugs">
            <mat-radio-button class="radio-button" value="yes">{{ 'global.words.yes' | translate }}</mat-radio-button>
            <mat-radio-button class="radio-button" value="no">{{ 'global.words.no' | translate }}</mat-radio-button>
          </mat-radio-group>
        </div>

        <div class="radio-form-field">
          <label class="radio-form-label">
            {{ 'pages.first_consultation.habits.form.drink_coffee' | translate }}
          </label>
          <mat-radio-group
            class="radio-button-group"
            formControlName="coffee">
            <mat-radio-button class="radio-button" value="yes">{{ 'global.words.yes' | translate }}</mat-radio-button>
            <mat-radio-button class="radio-button" value="no">{{ 'global.words.no' | translate }}</mat-radio-button>
          </mat-radio-group>


        <ng-container *ngIf="habitForm['controls'].coffee.value === 'global.words.yes'">
          <mat-form-field appearance="standard" floatLabel="always" class="number">
            <mat-label>{{ 'pages.first_consultation.habits.form.cups_a_day' | translate }}</mat-label>
            <input type="number"formControlName="coffeeNote" matInput placeholder="4" autocomplete="off" required>
            <mat-error class="input-error" *ngIf="!habitForm['controls'].coffeeNote.valid">{{ 'global.form.errors.required' | translate }}</mat-error>
          </mat-form-field>
        </ng-container>
        </div>

        <div class="radio-form-field">
          <label class="radio-form-label">
            {{ 'pages.first_consultation.habits.form.drink_tea' | translate }}
          </label>
          <mat-radio-group
            class="radio-button-group"
            formControlName="tea">
            <mat-radio-button class="radio-button" value="yes">{{ 'global.words.yes' | translate }}</mat-radio-button>
            <mat-radio-button class="radio-button" value="no">{{ 'global.words.no' | translate }}</mat-radio-button>
          </mat-radio-group>

          <ng-container *ngIf="habitForm['controls'].tea.value === 'global.words.yes'">
            <mat-form-field appearance="standard" floatLabel="always" class="number">
              <mat-label>{{ 'pages.first_consultation.habits.form.cups_a_day' | translate }}</mat-label>
              <input type="number"formControlName="teaNote" matInput placeholder="4" autocomplete="off">
              <mat-error class="input-error" *ngIf="!habitForm['controls'].teaNote.valid">{{ 'global.form.errors.required' | translate }}</mat-error>
            </mat-form-field>
          </ng-container>
        </div>

        <div class="radio-form-field">
          <label class="radio-form-label">{{ 'pages.first_consultation.habits.form.social_life' | translate }}</label>
          <mat-radio-group
            class="radio-button-group"
            formControlName="socialLife">
            <mat-radio-button class="radio-button" value="yes">{{ 'global.words.yes' | translate }}</mat-radio-button>
            <mat-radio-button class="radio-button" value="no">{{ 'global.words.no' | translate }}</mat-radio-button>
          </mat-radio-group>

          <ng-container *ngIf="habitForm['controls'].socialLife.value === 'global.words.yes'">
            <mat-form-field appearance="standard" floatLabel="always" class="number">
              <mat-label>{{ 'pages.first_consultation.habits.form.days_a_week' | translate }}</mat-label>
              <input type="number"formControlName="socialLifeNote" matInput placeholder="2" autocomplete="off">
              <mat-error class="input-error" *ngIf="!habitForm['controls'].socialLifeNote.valid">{{ 'global.form.errors.required' | translate }}</mat-error>
            </mat-form-field>
          </ng-container>
        </div>

        <div class="radio-form-field">
          <label class="radio-form-label">
            {{ 'pages.first_consultation.habits.form.stay_up_late' | translate }}
          </label>
          <mat-radio-group
            class="radio-button-group"
            formControlName="stayUpLate">
            <mat-radio-button class="radio-button" value="yes">{{ 'global.words.yes' | translate }}</mat-radio-button>
            <mat-radio-button class="radio-button" value="no">{{ 'global.words.no' | translate }}</mat-radio-button>
          </mat-radio-group>

          <ng-container *ngIf="habitForm['controls'].stayUpLate.value === 'global.words.yes'">
            <mat-form-field appearance="standard" floatLabel="always" class="number">
              <mat-label>{{ 'pages.first_consultation.habits.form.days_a_week' | translate }}</mat-label>
              <input type="number"formControlName="stayUpLateNote" matInput placeholder="4" autocomplete="off">
              <mat-error class="input-error" *ngIf="!habitForm['controls'].stayUpLateNote.valid">{{ 'global.form.errors.required' | translate }}</mat-error>
            </mat-form-field>
          </ng-container>
        </div>

        <section class="sleeping-habits" id="sleeping">
          <h3>{{ 'pages.first_consultation.habits.form.sleeping_habits' | translate }}</h3>
          <mat-form-field appearance="standard" floatLabel="always">
            <mat-label>{{ 'pages.first_consultation.habits.form.wake_up_time' | translate }}</mat-label>
            <mat-select matInput placeholder="{{ 'global.form.pick_time' | translate }}" formControlName="wakeUpTime" 
            panelClass="dropdown-regular" autocomplete="off" required>
              <mat-option *ngFor="let time of times" [value]="time.value">⏰ {{time.value}}</mat-option>
            </mat-select>
            <mat-error class="input-error" *ngIf="!habitForm['controls'].wakeUpTime.touched">{{ 'global.form.errors.required' | translate }}</mat-error>
          </mat-form-field>

          <mat-form-field appearance="standard" floatLabel="always">
            <mat-label>{{ 'pages.first_consultation.habits.form.bed_time' | translate }}</mat-label>
            <mat-select matInput placeholder="{{ 'global.form.pick_time' | translate }}" formControlName="sleepTime" 
            panelClass="dropdown-regular" autocomplete="off" required>
              <mat-option *ngFor="let time of times" [value]="time.value">⏰ {{time.value}}</mat-option>
            </mat-select>
            <mat-error class="input-error" *ngIf="!habitForm['controls'].sleepTime.touched">{{ 'global.form.errors.required' | translate }}</mat-error>
          </mat-form-field>
        </section>

        <section class="eating-habits" id="eating">
          <h3>{{ 'pages.first_consultation.habits.form.eating_habits' | translate }}</h3>
          <mat-form-field appearance="standard" floatLabel="always">
            <mat-label>{{ 'pages.first_consultation.habits.form.breakfast_time' | translate }}</mat-label>
            <mat-select matInput placeholder="{{ 'global.form.pick_time' | translate }}" formControlName="breakfastTime" 
            panelClass="dropdown-regular" autocomplete="off" required>
              <mat-option *ngFor="let time of times" [value]="time.value">⏰ {{time.value}}</mat-option>
            </mat-select>
            <mat-error class="input-error" *ngIf="!habitForm['controls'].breakfastTime.touched">{{ 'global.form.errors.required' | translate }}</mat-error>
          </mat-form-field>

          <mat-form-field appearance="standard" floatLabel="always">
            <mat-label>{{ 'pages.first_consultation.habits.form.lunch_time' | translate }}</mat-label>
            <mat-select matInput placeholder="{{ 'global.form.pick_time' | translate }}" formControlName="lunchTime" 
            panelClass="dropdown-regular" autocomplete="off" required>
              <mat-option *ngFor="let time of times" [value]="time.value">⏰ {{time.value}}</mat-option>
            </mat-select>
            <mat-error class="input-error" *ngIf="!habitForm['controls'].lunchTime.touched">{{ 'global.form.errors.required' | translate }}</mat-error>
          </mat-form-field>

          <mat-form-field appearance="standard" floatLabel="always">
            <mat-label>{{ 'pages.first_consultation.habits.form.dinner_time' | translate }}</mat-label>
            <mat-select matInput placeholder="{{ 'global.form.pick_time' | translate }}" formControlName="dinnerTime" 
            panelClass="dropdown-regular" autocomplete="off" required>
              <mat-option *ngFor="let time of times" [value]="time.value">⏰ {{time.value}}</mat-option>
            </mat-select>
            <mat-error class="input-error" *ngIf="!habitForm['controls'].dinnerTime.touched">{{ 'global.form.errors.required' | translate }}</mat-error>
          </mat-form-field>

          <mat-form-field appearance="standard" floatLabel="always">
            <mat-label>{{ 'pages.first_consultation.habits.form.who_cooks' | translate }}</mat-label>
            <mat-select matInput placeholder="{{ 'global.form.pick_one' | translate }}" formControlName="whoCooks" 
            panelClass="dropdown-regular" autocomplete="off" required>
              <mat-option value="patient">{{ 'pages.first_consultation.habits.form.patient' | translate }}</mat-option>
              <mat-option value="relative">{{ 'pages.first_consultation.habits.form.relative' | translate }}tive</mat-option>
              <mat-option value="maid">{{ 'pages.first_consultation.habits.form.maid' | translate }}</mat-option>
              <mat-option value="other">{{ 'global.words.other' | translate }}</mat-option>
            </mat-select>
            <mat-error class="input-error" *ngIf="!habitForm['controls'].whoCooks.touched">{{ 'global.form.errors.required' | translate }}</mat-error>
          </mat-form-field>

          <div class="radio-form-field">
            <label class="radio-form-label">
              {{ 'pages.first_consultation.habits.form.breakfast_home' | translate }}
            </label>
            <mat-radio-group
              class="radio-button-group"
              formControlName="breakfastAtHome">
              <mat-radio-button class="radio-button" value="yes">{{ 'global.words.yes' | translate }}</mat-radio-button>
              <mat-radio-button class="radio-button" value="no">{{ 'global.words.no' | translate }}</mat-radio-button>
            </mat-radio-group>

            <ng-container *ngIf="habitForm['controls'].breakfastAtHome.value === 'no'">
              <mat-form-field appearance="standard" floatLabel="always">
                <textarea type="text" matInput formControlName="breakfastAtHomeNote" placeholder="Where?" 
                matTextareaAutosize autofocus="off" autocomplete="off">
                </textarea>
              </mat-form-field>
            </ng-container>
          </div>

          <div class="radio-form-field">
            <label class="radio-form-label">
              {{ 'pages.first_consultation.habits.form.plenty_breakfast_time' | translate }}
            </label>
            <mat-radio-group
              class="radio-button-group"
              formControlName="timeForBreakfast">
              <mat-radio-button class="radio-button" value="yes">{{ 'global.words.yes' | translate }}</mat-radio-button>
              <mat-radio-button class="radio-button" value="no">{{ 'global.words.no' | translate }}</mat-radio-button>
            </mat-radio-group>

            <ng-container *ngIf="habitForm['controls'].timeForBreakfast.value === 'no'">
              <mat-form-field appearance="standard" floatLabel="always">
                <textarea type="text" matInput formControlName="timeForBreakfastNote" placeholder="Why not?" 
                matTextareaAutosize autofocus="off" autocomplete="off">
                </textarea>
              </mat-form-field>
            </ng-container>
          </div>
        </section>

        <section class="work" id="work">
          <h3>{{ 'pages.first_consultation.habits.work' | translate }}</h3>

          <mat-form-field appearance="standard" floatLabel="always">
            <mat-label>{{ 'pages.first_consultation.habits.form.your_work' | translate }}</mat-label>
            <textarea type="text" matInput formControlName="workDescription" placeholder="{{ 'global.form.short_summary' | translate }}" 
            matTextareaAutosize autofocus="off" autocomplete="off" required>
            </textarea>
          </mat-form-field>

          <div class="time-range">
            <label>{{ 'pages.first_consultation.habits.form.work_schedule' | translate }}</label>

            <div class="time-form-container">
              <mat-form-field appearance="standard" floatLabel="always">
                <mat-select matInput placeholder="{{ 'events.from' | translate }}" formControlName="workScheduleFrom" 
                panelClass="dropdown-regular" autocomplete="off" required>
                  <mat-option *ngFor="let time of times" [value]="time.value">⏰ {{time.value}}</mat-option>
                </mat-select>
                <mat-error class="input-error" *ngIf="!habitForm['controls'].workScheduleFrom.touched">{{ 'global.form.errors.required' | translate }}</mat-error>
              </mat-form-field>
              <mat-form-field appearance="standard" floatLabel="always">
                <mat-select matInput placeholder="{{ 'events.to' | translate }}" formControlName="workScheduleTo" 
                panelClass="dropdown-regular" autocomplete="off" required>
                  <mat-option *ngFor="let time of times" [value]="time.value">⏰ {{time.value}}</mat-option>
                </mat-select>
                <mat-error class="input-error" *ngIf="!habitForm['controls'].workScheduleTo.touched">{{ 'global.form.errors.required' | translate }}</mat-error>
              </mat-form-field>
            </div>
          </div>

          <div class="radio-form-field">
            <label class="radio-form-label">{{ 'pages.first_consultation.habits.form.work_weekends' | translate }}</label>
            <mat-radio-group
              class="radio-button-group"
              formControlName="workOnWeekends">
              <mat-radio-button class="radio-button" value="yes">{{ 'global.words.yes' | translate }}</mat-radio-button>
              <mat-radio-button class="radio-button" value="no">{{ 'global.words.no' | translate }}</mat-radio-button>
            </mat-radio-group>



            <div class="time-range" *ngIf="habitForm['controls'].workOnWeekends.value === 'global.words.yes'">
              <label>{{ 'pages.first_consultation.habits.form.your_schedule' | translate }}</label>
              <div class="time-form-container">
                <mat-form-field appearance="standard" floatLabel="always">
                  <mat-select matInput placeholder="{{firstConsultation?.habits?.work?.workOnWeekendsNote?.from}}" formControlName="workOnWeekendsFrom" 
                  panelClass="dropdown-regular" autocomplete="off" required>
                    <mat-option *ngFor="let time of times" [value]="time?.value">⏰ {{time?.value}}</mat-option>
                  </mat-select>
                  <mat-error class="input-error" *ngIf="!habitForm['controls'].workOnWeekendsFrom.touched">{{ 'global.form.errors.required' | translate }}</mat-error>
                </mat-form-field>
                <mat-form-field appearance="standard" floatLabel="always">
                  <mat-select matInput placeholder="{{firstConsultation?.habits?.work?.workOnWeekendsNote?.to}}" formControlName="workOnWeekendsTo" 
                  panelClass="dropdown-regular" autocomplete="off" required>
                    <mat-option *ngFor="let time of times" [value]="time.value">⏰ {{time.value}}</mat-option>
                  </mat-select>
                  <mat-error class="input-error" *ngIf="!habitForm['controls'].workOnWeekendsTo.touched">{{ 'global.form.errors.required' | translate }}</mat-error>
                </mat-form-field>
              </div>
            </div>
          </div>

          <div class="slider-container">
            <div class="mat-form-field form-slider-field">
              <span class="label">
                {{ 'pages.first_consultation.habits.form.home_to_work' | translate }}
              </span>
              <div class="slider">
                <mat-slider class="form-slider home-work" [(value)]="homeToWorkScale" thumbLabel min="0" max="180">
                </mat-slider>
                <div class="percentage-circle">
                  {{homeToWorkScale}}
                  <ng-container *ngIf="!homeToWorkScale">0</ng-container>
                </div>
              </div>
            </div>

            <div class="mat-form-field form-slider-field">
              <span class="label">
                {{ 'pages.first_consultation.habits.form.work_to_home' | translate }}
              </span>
              <div class="slider">
                <mat-slider class="form-slider home-work" [(value)]="workToHomeScale" thumbLabel min="0" max="180">
                </mat-slider>
                <div class="percentage-circle">
                  {{workToHomeScale}}
                  <ng-container *ngIf="!workToHomeScale">0</ng-container>
                </div>
              </div>
            </div>
          </div>

          <mat-form-field appearance="standard" floatLabel="always">
            <mat-label>{{ 'pages.first_consultation.habits.form.transportation' | translate }}</mat-label>
            <mat-select matInput placeholder="Pick a method" formControlName="transportationMethod" 
            panelClass="dropdown-regular" autocomplete="off" required>
            <mat-option value="car">{{ 'pages.first_consultation.habits.form.car' | translate }}</mat-option>
            <mat-option value="public">{{ 'pages.first_consultation.habits.form.public' | translate }}</mat-option>
            <mat-option value="bike">{{ 'pages.first_consultation.habits.form.bike' | translate }}</mat-option>
            <mat-option value="walk">{{ 'pages.first_consultation.habits.form.walking' | translate }}</mat-option>
            </mat-select>
            <mat-error class="input-error" *ngIf="!habitForm['controls'].transportationMethod.touched">{{ 'global.form.errors.required' | translate }}</mat-error>
          </mat-form-field>

          <div class="radio-form-field">
            <label class="radio-form-label">
              {{ 'pages.first_consultation.habits.form.eat_during_work' | translate }}
            </label>
            <mat-radio-group
              class="radio-button-group"
              formControlName="eatDuringJob">
              <mat-radio-button class="radio-button" value="yes">{{ 'global.words.yes' | translate }}</mat-radio-button>
              <mat-radio-button class="radio-button" value="no">{{ 'global.words.no' | translate }}</mat-radio-button>
            </mat-radio-group>
          </div>

          <div class="radio-form-field">
            <label class="radio-form-label">
              {{ 'pages.first_consultation.habits.form.snack_during_work' | translate }}
            </label>
            <mat-radio-group
              class="radio-button-group"
              formControlName="practicalSnackDuringJob">
              <mat-radio-button class="radio-button" value="yes">{{ 'global.words.yes' | translate }}</mat-radio-button>
              <mat-radio-button class="radio-button" value="no">{{ 'global.words.no' | translate }}</mat-radio-button>
            </mat-radio-group>
          </div>

          <mat-form-field appearance="standard" floatLabel="always">
            <mat-label>
              {{ 'pages.first_consultation.habits.form.snack_level' | translate }}
            </mat-label>
            <mat-select matInput placeholder="{{ 'global.form.pick_one' | translate }}" formControlName="snacksPreference" 
            panelClass="dropdown-regular" autocomplete="off" required>
              <mat-option value="elaborate">Elaborate</mat-option>
              <mat-option value="simple">Simple</mat-option>
            </mat-select>
            <mat-error class="input-error" *ngIf="!habitForm['controls'].snacksPreference.touched">{{ 'global.form.errors.required' | translate }}</mat-error>
          </mat-form-field>
        </section>
   
        <div class="radio-form-field">
          <label class="radio-form-label">
            {{ 'pages.first_consultation.habits.form.kitchen_gadgets' | translate }}
          </label>
          <mat-radio-group
            class="radio-button-group"
            formControlName="kitchenGadgetsAtWork">
            <mat-radio-button class="radio-button" value="yes">{{ 'global.words.yes' | translate }}</mat-radio-button>
            <mat-radio-button class="radio-button" value="no">{{ 'global.words.no' | translate }}</mat-radio-button>
          </mat-radio-group>
        </div>     
       </form>

      <section class="btn-area">
        <button class="dialog-button" matStepperPrevious>{{ 'global.buttons.back' | translate }}</button>
        <button class="dialog-button" matStepperNext>{{ 'global.buttons.next' | translate }}</button>
      </section>
    </mat-step>

    <mat-step [stepControl]="bodyFunctionsForm">
      <ng-template matStepLabel>
        {{ 'pages.first_consultation.steps.body_functions' | translate }}
      </ng-template>
      
      <div class="title-area" id="bodyfunctions">
        <h3>{{ 'pages.first_consultation.body_functions.step_title' | translate }}</h3>
        <p class="card-text">
          {{ 'pages.first_consultation.body_functions.step_intro' | translate }}
        </p>
      </div>  

      <form [formGroup]="bodyFunctionsForm">
        <section class="diuresis" id="diuresis">
          <h3>{{ 'pages.first_consultation.body_functions.diuresis' | translate }}</h3>
          
          <mat-form-field appearance="standard" floatLabel="always" class="number">
            <mat-label>{{ 'pages.first_consultation.body_functions.form.urinate_each_day' | translate }}</mat-label>
            <input type="number"formControlName="urinateAmount" matInput placeholder="6" autocomplete="off" required>
            <mat-error class="input-error" *ngIf="!bodyFunctionsForm['controls'].urinateAmount.valid">{{ 'global.form.errors.required' | translate }}</mat-error>
          </mat-form-field>
          <div class="radio-form-field">
            <label class="radio-form-label">
              {{ 'pages.first_consultation.body_functions.form.urinate_at_night' | translate }}
            </label>
            <mat-radio-group
              class="radio-button-group"
              formControlName="middleNightUrinate">
              <mat-radio-button class="radio-button" value="yes">{{ 'global.words.yes' | translate }}</mat-radio-button>
              <mat-radio-button class="radio-button" value="no">{{ 'global.words.no' | translate }}</mat-radio-button>
            </mat-radio-group>
          </div>
        </section>

        <section class="bowel-movements" id="bowel">
          <h3>{{ 'pages.first_consultation.body_functions.form.bowel_movements' | translate }}</h3>
        
          <div class="radio-form-field">
            <label class="radio-form-label">
              {{ 'pages.first_consultation.body_functions.form.every_day' | translate }}
            </label>
            <mat-radio-group
              class="radio-button-group"
              formControlName="everyDay">
              <mat-radio-button class="radio-button" value="yes">{{ 'global.words.yes' | translate }}</mat-radio-button>
              <mat-radio-button class="radio-button" value="no">{{ 'global.words.no' | translate }}</mat-radio-button>
            </mat-radio-group>

            <ng-container *ngIf="bodyFunctionsForm['controls'].everyDay.value === 'no'">
              <mat-form-field appearance="standard" floatLabel="always" class="number">
                <mat-label>
                  {{ 'pages.first_consultation.body_functions.form.times_per_week' | translate }}
                </mat-label>
                <input type="number"formControlName="timesPerWeek" matInput placeholder="4" autocomplete="off" required>
                <mat-error class="input-error" *ngIf="!bodyFunctionsForm['controls'].timesPerWeek.valid">{{ 'global.form.errors.required' | translate }}</mat-error>
              </mat-form-field>
            </ng-container>

            <ng-container *ngIf="bodyFunctionsForm['controls'].everyDay.value === 'global.words.yes'">
              <mat-form-field appearance="standard" floatLabel="always" class="number">
                <mat-label>
                  {{ 'pages.first_consultation.body_functions.form.bowel_movements_a_day' | translate }}
                </mat-label>
                <input type="number"formControlName="timesPerDay" matInput placeholder="6" autocomplete="off" required>
                <mat-error class="input-error" *ngIf="!bodyFunctionsForm['controls'].timesPerDay.valid">{{ 'global.form.errors.required' | translate }}</mat-error>
              </mat-form-field>
            </ng-container>
          </div>


          <div class="radio-form-field">
            <label class="radio-form-label">
              {{ 'pages.first_consultation.body_functions.form.same_movements' | translate }}
            </label>
            <mat-radio-group
              class="radio-button-group"
              formControlName="sameSchedule">
              <mat-radio-button class="radio-button" value="yes">{{ 'global.words.yes' | translate }}</mat-radio-button>
              <mat-radio-button class="radio-button" value="no">{{ 'global.words.no' | translate }}</mat-radio-button>
            </mat-radio-group>
          </div>

        </section>

        <section class="appetite" id="appetite">
          <h3>{{ 'pages.first_consultation.body_functions.appetite' | translate }}</h3>
        
          <div class="mat-form-field form-slider-field single-slider">
            <span class="label">{{ 'pages.first_consultation.body_functions.form.appetite_category' | translate }}</span>
            <div class="slider">
              <mat-slider class="form-slider hungry" [(value)]="hungryScale" thumbLabel min="0" max="10">
              </mat-slider>
              <div class="percentage-circle">
                {{hungryScale}}
                <ng-container *ngIf="!hungryScale">0</ng-container>
              </div>
            </div>
          </div>

          <mat-form-field appearance="standard" floatLabel="always">
            <mat-label>
              {{ 'pages.first_consultation.body_functions.form.hungry_time' | translate }}
            </mat-label>
            <mat-select matInput placeholder="{{ 'global.form.pick_one' | translate }}" formControlName="mostHungryMoment" 
            panelClass="dropdown-regular" autocomplete="off" required>
              <mat-option value="breakfast">{{ 'global.meals.breakfast' | translate }}</mat-option>
              <mat-option value="middle-morning">{{ 'global.meals.middle_morning' | translate }}</mat-option>
              <mat-option value="lunch">{{ 'global.meals.lunch' | translate }}</mat-option>
              <mat-option value="middle-afternoon">{{ 'global.meals.middle_afternoon' | translate }}</mat-option>
              <mat-option value="dinner">{{ 'global.meals.dinner' | translate }}</mat-option>
              <mat-option value="after-dinner">{{ 'global.meals.after_dinner' | translate }}</mat-option>
            </mat-select>
            <mat-error class="input-error" *ngIf="!bodyFunctionsForm['controls'].mostHungryMoment.touched">{{ 'global.form.errors.required' | translate }}</mat-error>
          </mat-form-field>

        </section>

        <section class="female" id="female"
          *ngIf="basicDataForm['controls'].sex.value === 'Feminine' || firstConsultation.basicData.sex === 'Feminine'">
          <h3>{{ 'pages.first_consultation.body_functions.female.title' | translate }}</h3>
          
          <mat-form-field appearance="standard" floatLabel="always" class="number">
            <mat-label>
              {{ 'pages.first_consultation.body_functions.female.first_period' | translate }}
            </mat-label>
            <input type="number"formControlName="firstMenstrualPeriod" matInput  autocomplete="off" 
              placeholder="{{firstConsultation.bodyFunctions.female.firstMenstrualPeriod}}">
            <mat-error class="input-error" *ngIf="!bodyFunctionsForm['controls'].firstMenstrualPeriod.valid">{{ 'global.form.errors.required' | translate }}</mat-error>
          </mat-form-field>
          
          <div class="radio-form-field">
            <label class="radio-form-label">
              {{ 'pages.first_consultation.body_functions.female.regular_cycle' | translate }}
            </label>
            <mat-radio-group
              class="radio-button-group"
              formControlName="regularCycle">
              <mat-radio-button class="radio-button" value="yes">{{ 'global.words.yes' | translate }}</mat-radio-button>
              <mat-radio-button class="radio-button" value="no">{{ 'global.words.no' | translate }}</mat-radio-button>
            </mat-radio-group>
          </div>

          <div class="radio-form-field">
            <label class="radio-form-label">
              {{ 'pages.first_consultation.body_functions.female.birth_control_pills' | translate }}
            </label>
            <mat-radio-group
              class="radio-button-group"
              formControlName="birthControlPills">
              <mat-radio-button class="radio-button" value="yes">{{ 'global.words.yes' | translate }}</mat-radio-button>
              <mat-radio-button class="radio-button" value="no">{{ 'global.words.no' | translate }}</mat-radio-button>
            </mat-radio-group>

            <ng-container *ngIf="bodyFunctionsForm['controls'].birthControlPills.value === 'global.words.yes'">
              <mat-form-field appearance="standard" floatLabel="always">
                <input type="text" matInput formControlName="birthControlPillsNote" placeholder="Which one?" autofocus="off" autocomplete="off" >
              </mat-form-field>
            </ng-container>
          </div>

          <mat-form-field appearance="standard" floatLabel="always" class="number">
            <mat-label>{{ 'pages.first_consultation.body_functions.female.period_x_days' | translate }}</mat-label>
            <input type="number"formControlName="periodXDays" matInput autocomplete="off" 
              placeholder="x">
            <mat-error class="input-error" *ngIf="!bodyFunctionsForm['controls'].periodXDays.valid">{{ 'global.form.errors.required' | translate }}</mat-error>
          </mat-form-field>

          <mat-form-field appearance="standard" floatLabel="always" class="number">
            <mat-label>{{ 'pages.first_consultation.body_functions.female.bleed_x_days' | translate }}</mat-label>
            <input type="number"formControlName="bleedingXDays" matInput autocomplete="off" 
              placeholder="x">
            <mat-error class="input-error" *ngIf="!bodyFunctionsForm['controls'].bleedingXDays.valid">{{ 'global.form.errors.required' | translate }}</mat-error>
          </mat-form-field>

          <mat-form-field appearance="standard" floatLabel="always" class="number">
            <mat-label>{{ 'pages.first_consultation.body_functions.female.times_pregnant' | translate }}</mat-label>
            <input type="number"formControlName="pregnancies" matInput autocomplete="off" 
              placeholder="{{firstConsultation.bodyFunctions.female.pregnancies}}">
            <mat-error class="input-error" *ngIf="!bodyFunctionsForm['controls'].pregnancies.valid">{{ 'global.form.errors.required' | translate }}</mat-error>
          </mat-form-field>
        </section>
        
        <section class="sleep" id="sleep">
          <h3>{{ 'pages.first_consultation.body_functions.form.sleep' | translate }}</h3>
          <mat-form-field appearance="standard" floatLabel="always">
            <mat-label>{{ 'pages.first_consultation.body_functions.form.current_sleep' | translate }}</mat-label>
            <mat-select matInput placeholder="{{firstConsultation.bodyFunctions.sleep.sleepingStatus}}" formControlName="sleepingStatus" 
            panelClass="dropdown-regular" autocomplete="off" required>
            <mat-option value="good">{{ 'global.words.good' | translate }}</mat-option>
            <mat-option value="regular">{{ 'global.words.regular' | translate }}</mat-option>
            <mat-option value="bad">{{ 'global.words.bad' | translate }}</mat-option>
            </mat-select>
            <mat-error class="input-error" *ngIf="!bodyFunctionsForm['controls'].sleepingStatus.touched">{{ 'global.form.errors.required' | translate }}</mat-error>
          </mat-form-field>

          <mat-form-field appearance="standard" floatLabel="always" class="number">
            <mat-label>
              {{ 'pages.first_consultation.body_functions.form.average_sleep' | translate }}
            </mat-label>
            <input type="number"formControlName="averageHours" matInput placeholder="18" max="24" autocomplete="off" required>
            <mat-error class="input-error" *ngIf="!bodyFunctionsForm['controls'].averageHours.valid">{{ 'global.form.errors.required' | translate }}</mat-error>
          </mat-form-field>

          <div class="radio-form-field sleep-troubles">
            <label class="radio-form-label">
              {{ 'pages.first_consultation.body_functions.form.trouble_sleep' | translate }}
            </label>
            <mat-radio-group
              class="radio-button-group"
              formControlName="troubleFallingAsleep">
              <mat-radio-button class="radio-button" value="yes">{{ 'global.words.yes' | translate }}</mat-radio-button>
              <mat-radio-button class="radio-button" value="no">{{ 'global.words.no' | translate }}</mat-radio-button>
            </mat-radio-group>

            <ng-container *ngIf="bodyFunctionsForm['controls'].troubleFallingAsleep.value === 'global.words.yes'">
              <mat-form-field appearance="standard" floatLabel="always" class="number">
                <mat-label>{{ 'pages.first_consultation.body_functions.form.minutes_amount' | translate }}</mat-label>
                <input type="number"formControlName="troubleFallingAsleepNote" matInput placeholder="135" autocomplete="off">
                <mat-error class="input-error" *ngIf="!bodyFunctionsForm['controls'].troubleFallingAsleepNote.valid">{{ 'global.form.errors.required' | translate }}</mat-error>
              </mat-form-field>
            </ng-container>
          </div>

          <div class="radio-form-field wake-up">
            <label class="radio-form-label">{{ 'pages.first_consultation.body_functions.form.energized' | translate }}</label>
            <mat-radio-group
              class="radio-button-group"
              formControlName="wakeUpEnergized">
              <mat-radio-button class="radio-button" value="yes">{{ 'global.words.yes' | translate }}</mat-radio-button>
              <mat-radio-button class="radio-button" value="no">{{ 'global.words.no' | translate }}</mat-radio-button>
            </mat-radio-group>
          </div>
        </section>
      </form>

      <section class="btn-area">
        <button class="dialog-button" matStepperPrevious>{{ 'global.buttons.back' | translate }}</button>
        <button class="dialog-button" matStepperNext>{{ 'global.buttons.next' | translate }}</button>
      </section>

    </mat-step>

    <mat-step [stepControl]="generalDataForm">
      <ng-template matStepLabel>General 2/2</ng-template>
      
      <div class="title-area" id="generaltwo">
        <h3>{{ 'pages.first_consultation.general_info_2.step_title' | translate }}</h3>
        <p class="card-text">
          {{ 'pages.first_consultation.general_info_2.step_intro' | translate }}
        </p>
      </div>

      <form [formGroup]="generalDataForm" class="personal-form">
        <section class="add-form-field-container" formArrayName="healthConditionsArr" id="conditions">
          <h3>{{ 'pages.first_consultation.general_info_2.form.health_conditions' | translate }}</h3>
            <div class="dynamic-form-field-container" *ngFor="let condition of healthConditionsArray.controls; let i=index" [formGroupName]="i">
              <div class="number-id">
                <h1>{{i+1}}</h1>
              </div>
              <mat-form-field appearance="standard" floatLabel="always">
                <mat-label>
                  {{ 'pages.first_consultation.general_info_2.form.have_conditions' | translate }}
                </mat-label>
                <mat-select matInput formControlName="healthCondition" panelClass="dropdown-regular" autocomplete="off" required
                  placeholder="{{condition.value.healthCondition.healthCondition}}">
                  <mat-option *ngFor="let condition of healthConditions" value="{{condition.viewValue}}">{{condition.viewValue}}</mat-option>
                </mat-select>
                <mat-error class="input-errors" *ngIf="!healthCondition.valid && healthCondition.touched">{{ 'global.form.errors.required' | translate }}</mat-error>
              </mat-form-field>
              <div class="btn-area">
                <button type="button" mat-icon-button type="button" class="delete-btn" (click)="deleteHealthCondition(i)">
                  <i class="fa__icon fa fa-trash"></i>
                </button>
              </div>
            </div>
          <button type="button" class="add-form-field" (click)="addHealthCondition()">
            <i class="fa__icon fa fa-plus"></i>
            {{ 'pages.first_consultation.general_info_2.form.add_condition' | translate }}
          </button>
        </section>

        <section class="add-form-field-container" formArrayName="pastTwoWeeksArr">
          <h3>{{ 'pages.first_consultation.general_info_2.form.past_2_weeks' | translate }}</h3>
            <div class="dynamic-form-field-container" *ngFor="let item of pastTwoWeeksArray.controls; let i=index" [formGroupName]="i">
              <div class="number-id">
                <h1>{{i+1}}</h1>
              </div>
              <mat-form-field appearance="standard" floatLabel="always">
                <mat-label>
                  {{ 'pages.first_consultation.general_info_2.form.2_week_conditions' | translate }}:</mat-label>
                <mat-select matInput placeholder="Pick an option" formControlName="pastTwoWeeksValue"
                placeholder="{{item.value.pastTwoWeeksValue.pastTwoWeeksValue ? item.value.pastTwoWeeksValue.pastTwoWeeksValue : 'Pick an option'}}"
                panelClass="dropdown-regular" autocomplete="off" required>
                  <mat-option value="diarrhea">
                    {{ 'pages.first_consultation.general_info_2.conditions.diarrhea' | translate }}
                  </mat-option>
                  <mat-option value="gastritis">
                    {{ 'pages.first_consultation.general_info_2.conditions.gastritis' | translate }}
                  </mat-option>
                  <mat-option value="constipation">
                    {{ 'pages.first_consultation.general_info_2.conditions.constipation' | translate }}
                  </mat-option>
                  <mat-option value="nausea">
                    {{ 'pages.first_consultation.general_info_2.conditions.nausea' | translate }}
                  </mat-option>
                  <mat-option value="dizziness">
                    {{ 'pages.first_consultation.general_info_2.conditions.dizziness' | translate }}
                  </mat-option>
                  <mat-option value="none">{{ 'global.form.none_of_above' | translate }}</mat-option>
                </mat-select>
                <mat-error class="input-errors" *ngIf="!pastTwoWeeksValue.valid && pastTwoWeeksValue.touched">{{ 'global.form.errors.required' | translate }}</mat-error>
              </mat-form-field>
              <div class="btn-area">
                <button type="button" mat-icon-button type="button"
                  class="delete-btn" (click)="deletePastTwoWeeks(i)">
                  <i class="fa__icon fa fa-trash"></i>
                </button>
              </div>
            </div>
          <button type="button" class="add-form-field" (click)="addPastTwoWeeks()">
            <i class="fa__icon fa fa-plus"></i>
            {{ 'global.buttons.add' | translate }}
          </button>
        </section>

        <mat-form-field appearance="standard" floatLabel="always">
          <mat-label>
            {{ 'pages.first_consultation.general_info_2.form.using_meds' | translate }}
          </mat-label>
          <textarea type="text" matInput formControlName="medication" placeholder="{{ 'pages.first_consultation.general_info_2.form.seperate_medications' | translate }}" 
          matTextareaAutosize autofocus="off" autocomplete="off" required>
          </textarea>
          <mat-error class="input-error" *ngIf="!generalDataForm['controls'].medication.valid">
            {{ 'global.form.errors.required' | translate }}</mat-error>
        </mat-form-field>

        <div class="radio-form-field gastritis">
          <label class="radio-form-label">
            {{ 'pages.first_consultation.general_info_2.form.have_gastritis' | translate }}
          </label>
          <mat-radio-group
            class="radio-button-group"
            formControlName="gastritis">
            <mat-radio-button class="radio-button" value="yes">{{ 'global.words.yes' | translate }}</mat-radio-button>
            <mat-radio-button class="radio-button" value="no">{{ 'global.words.no' | translate }}</mat-radio-button>
          </mat-radio-group>
        </div>

        <section class="add-form-field-container" formArrayName="dontEatArr">
          <h3>
            {{ 'pages.first_consultation.general_info_2.form.no_go_products' | translate }}
          </h3>
            <div class="dynamic-form-field-container" *ngFor="let item of dontEatArray.controls; let i=index" [formGroupName]="i">
              <div class="number-id">
                <h1>{{i+1}}</h1>
              </div>
              <mat-form-field appearance="standard" floatLabel="always">
                <mat-label>
                  {{ 'pages.first_consultation.general_info_2.form.cant_consume' | translate }}
                </mat-label>
                <input type="text" formControlName="dontEatItem" matInput placeholder="Describe the product" autocomplete="off" required
                placeholder="{{item.value.dontEatItem.dontEatItem ? item.value.dontEatItem.dontEatItem : 'Describe the product'}}">
                <mat-error class="input-errors" *ngIf="!dontEatItem.valid && dontEatItem.touched">{{ 'global.form.errors.required' | translate }}</mat-error>
              </mat-form-field>
              <div class="btn-area">
                <button type="button" mat-icon-button type="button" class="delete-btn" (click)="deleteDontEatItem(i)">
                  <i class="fa__icon fa fa-trash"></i>
                </button>
              </div>
            </div>
          <button type="button" class="add-form-field" (click)="addDontEatItem()">
            <i class="fa__icon fa fa-plus"></i>
            {{ 'pages.first_consultation.general_info_2.buttons.add_product' | translate }}
          </button>
        </section>

        <mat-form-field appearance="standard" floatLabel="always" class="diet-type">
          <mat-label>
            {{ 'pages.first_consultation.general_info_2.form.preferred_diet' | translate }}
          </mat-label>
          <mat-select matInput placeholder="Pick an appropriate diet type" formControlName="dietType"
          autocomplete="off" panelClass="dropdown-regular" required>
            <mat-option *ngFor="let type of dietTypes" value="{{type.value}}">{{type.viewValue}}</mat-option>
          </mat-select>
          <mat-error class="input-error" *ngIf="!generalDataForm['controls'].dietType.valid">{{ 'global.form.errors.required' | translate }}</mat-error>
        </mat-form-field>

        <section class="big-category dinner" id="dinner">
          <h1 class="big-category__title">{{ 'global.meals.dinner' | translate }}</h1>

          <div class="radio-form-field">
            <label class="radio-form-label">
              {{ 'pages.first_consultation.general_info_2.form.dinner_type' | translate }}
            </label>
            <mat-radio-group
              class="radio-button-group"
              formControlName="portion">
              <mat-radio-button class="radio-button" value="plate">
                {{ 'pages.first_consultation.general_info_2.form.plate' | translate }}
              </mat-radio-button>
              <mat-radio-button class="radio-button" value="snack">
                {{ 'pages.first_consultation.general_info_2.form.snack' | translate }}
              </mat-radio-button>
            </mat-radio-group>
          </div>

          <mat-form-field appearance="standard" floatLabel="always">
            <mat-label>
              {{ 'pages.first_consultation.general_info_2.form.prepared_dinner' | translate }}
            </mat-label>
            <mat-select matInput placeholder="{{ 'global.form.pick_one' | translate }}" formControlName="preparedBy" 
            panelClass="dropdown-regular" autocomplete="off" required>
              <mat-option value="patient">{{ 'pages.first_consultation.habits.form.patient' | translate }}</mat-option>
              <mat-option value="relative">{{ 'pages.first_consultation.habits.form.relative' | translate }}</mat-option>
              <mat-option value="maid">{{ 'pages.first_consultation.habits.form.maid' | translate }}</mat-option>
              <mat-option value="other">{{ 'global.words.other' | translate }}</mat-option>
            </mat-select>
            <mat-error class="input-error" *ngIf="!generalDataForm['controls'].preparedBy.touched">{{ 'global.form.errors.required' | translate }}</mat-error>
          </mat-form-field>

          <div class="radio-form-field">
            <label class="radio-form-label">
              {{ 'pages.first_consultation.general_info_2.form.eat_after_dinner' | translate }}
            </label>
            <mat-radio-group
              class="radio-button-group"
              formControlName="eatAfterDinner">
              <mat-radio-button class="radio-button" value="yes">{{ 'global.words.yes' | translate }}</mat-radio-button>
              <mat-radio-button class="radio-button" value="no">{{ 'global.words.no' | translate }}</mat-radio-button>
            </mat-radio-group>

            <ng-container *ngIf="generalDataForm['controls'].eatAfterDinner.value === 'global.words.yes'">
              <mat-form-field appearance="standard" floatLabel="always">
                <textarea type="text" matInput formControlName="eatAfterDinnerNote" placeholder="Like what?" 
                matTextareaAutosize autofocus="off" autocomplete="off">
                </textarea>
              </mat-form-field>
            </ng-container>
          </div>

          <section class="add-form-field-container" formArrayName="shoppingLocationArr">
            <h3>{{ 'pages.first_consultation.general_info_2.form.where_shopping' | translate }}</h3>
              <div class="dynamic-form-field-container" *ngFor="let control of shoppingLocationArray.controls; let i=index" [formGroupName]="i">
                <div class="number-id">
                  <h1>{{i+1}}</h1>
                </div>
                <mat-form-field appearance="standard" floatLabel="always">
                  <mat-label>
                    {{ 'pages.first_consultation.general_info_2.form.shopping_location' | translate }}
                  </mat-label>
                  <input type="text" formControlName="shoppingLocation" matInput
                    autocomplete="off" required
                    placeholder="{{control.value.shoppingLocation ? control.value.shoppingLocation : 'Store name'}}">
                  <mat-error class="input-errors" *ngIf="!shoppingLocation.valid && shoppingLocation.touched">
                    {{ 'global.form.errors.required' | translate }}
                  </mat-error>
                </mat-form-field>
                <div class="btn-area">
                  <button type="button" mat-icon-button type="button" class="delete-btn" (click)="deleteShoppingLocation(i)">
                    <i class="fa__icon fa fa-trash"></i>
                  </button>
                </div>
              </div>
            <button type="button" class="add-form-field" (click)="addShoppingLocation()">
              <i class="fa__icon fa fa-plus"></i>
              {{ 'pages.first_consultation.general_info_2.buttons.add_location' | translate }}
            </button>
          </section>

          <mat-form-field appearance="standard" floatLabel="always">
            <mat-label>{{ 'pages.first_consultation.general_info_2.form.who_shops' | translate }}</mat-label>
            <mat-select matInput placeholder="{{ 'global.form.pick_one' | translate }}" formControlName="whoBuys" 
            panelClass="dropdown-regular" autocomplete="off" required>
              <mat-option value="patient">
                {{ 'pages.first_consultation.habits.form.patient' | translate }}
              </mat-option>
              <mat-option value="relative">
                {{ 'pages.first_consultation.habits.form.relative' | translate }}
              </mat-option>
              <mat-option value="maid">
                {{ 'pages.first_consultation.habits.form.maid' | translate }}
              </mat-option>
              <mat-option value="other">
                {{ 'global.words.other' | translate }}
              </mat-option>
            </mat-select>
            <mat-error class="input-error" *ngIf="!generalDataForm['controls'].whoBuys.touched">{{ 'global.form.errors.required' | translate }}</mat-error>
          </mat-form-field>

          <div class="radio-form-field">
            <label class="radio-form-label">
              {{ 'pages.first_consultation.general_info_2.form.order_online' | translate }}
            </label>
            <mat-radio-group
              class="radio-button-group"
              formControlName="orderOnline">
              <mat-radio-button class="radio-button" value="yes">{{ 'global.words.yes' | translate }}</mat-radio-button>
              <mat-radio-button class="radio-button" value="no">{{ 'global.words.no' | translate }}</mat-radio-button>
            </mat-radio-group>
          </div>
        </section>

        <section class="big-category physical-activities" id="activities">
          <h1 class="big-category__title">
            {{ 'pages.first_consultation.general.physical_activities' | translate }}
          </h1>

          <div class="radio-form-field activity-confirmations">
            <label class="radio-form-label">
              {{ 'pages.first_consultation.general_info_2.form.have_physical_activities' | translate }}
            </label>
            <mat-radio-group
              class="radio-button-group"
              formControlName="physicalActivitiesConfirmation">
              <mat-radio-button class="radio-button" value="yes">{{ 'global.words.yes' | translate }}</mat-radio-button>
              <mat-radio-button class="radio-button" value="no">{{ 'global.words.no' | translate }}</mat-radio-button>
            </mat-radio-group>

            <ng-container *ngIf="generalDataForm['controls'].physicalActivitiesConfirmation.value === 'no'">
              <mat-form-field appearance="standard" floatLabel="always">
                <textarea type="text" matInput formControlName="physicalActivitiesWhy" placeholder="{{firstConsultation.generalData.physicalActivity.physicalActivitiesWhy}}" 
                matTextareaAutosize autofocus="off" autocomplete="off" required>
                </textarea>
              </mat-form-field>
            </ng-container>

            <ng-container *ngIf="generalDataForm['controls'].physicalActivitiesConfirmation.value === 'global.words.yes'">
              <section class="add-form-field-container" formArrayName="activityArr">
                <h3>
                  {{ 'pages.first_consultation.general_info_2.form.define_activities' | translate }}
                </h3>
                <div class="dynamic-form-field-container multiple-fields" *ngFor="let item of activityArray.controls; let i=index" 
                  [formGroupName]="i">
                  <div class="number-id">
                    <h1>{{i+1}}</h1>
                  </div>

                  <div class="form-fields">
                    <mat-form-field appearance="standard" floatLabel="always">
                      <mat-label>{{ 'pages.first_consultation.general_info_2.form.which_activities' | translate }}</mat-label>
                      <mat-select matInput placeholder="{{getChosenActivity(i).controls['physicalActivity'].value.exerciseName}}" 
                        formControlName="physicalActivity" panelClass="dropdown-regular" autocomplete="off" required>
                        <mat-option *ngFor="let activity of activities" [value]="activity">{{activity.exerciseName}}</mat-option>
                      </mat-select>
                      <mat-error class="input-error" *ngIf="!physicalActivity.touched">{{ 'global.form.errors.required' | translate }}</mat-error>
                    </mat-form-field>

                    <div class="form-fields__add-exercise">
                      <span>{{ 'global.words.or' | translate }} </span>
                      <button class="text-link" (click)="addExercise()">
                        {{ 'pages.exercises.buttons.add_exercise' | translate }}
                      </button>
                    </div>

                    <div class="time-range">
                      <label>
                        {{ 'pages.first_consultation.general_info_2.form.workout_schedule' | translate }}
                      </label>
                      <div class="time-form-container">
                        <mat-form-field appearance="standard" floatLabel="always">
                          <mat-select matInput placeholder="{{ getChosenActivity(i).controls['workoutScheduleFrom'].value}}" formControlName="workoutScheduleFrom" 
                          panelClass="dropdown-regular" autocomplete="off" required>
                            <mat-option *ngFor="let time of times" [value]="time.value">⏰ {{time.value}}</mat-option>
                          </mat-select>
                        </mat-form-field>
                        <mat-form-field appearance="standard" floatLabel="always">
                          <mat-select matInput placeholder="{{ getChosenActivity(i).controls['workoutScheduleTo'].value}}" formControlName="workoutScheduleTo" 
                          panelClass="dropdown-regular" autocomplete="off" required>
                            <mat-option *ngFor="let time of times" [value]="time.value">⏰ {{time.value}}</mat-option>
                          </mat-select>
                        </mat-form-field>
                      </div>
                    </div>

                    <ng-container *ngIf="getChosenActivity(i).controls['physicalActivity'].value === 'other'">
                      <mat-form-field appearance="standard" floatLabel="always">
                        <mat-label>{{ 'pages.first_consultation.general_info_2.form.physical_activity' | translate }}</mat-label>
                        <input type="text" formControlName="activitySpecification" matInput autocomplete="off" required
                          placeholder="{{ getChosenActivity(i).controls['activitySpecification'].value}}">
                      </mat-form-field>
                    </ng-container>
            
                    <mat-form-field appearance="standard" floatLabel="always">
                      <mat-label>
                        {{ 'pages.first_consultation.general_info_2.form.training_location' | translate }}
                      </mat-label>
                      <input type="text" formControlName="trainingLocation" matInput autocomplete="off" required
                        placeholder="{{ getChosenActivity(i).controls['trainingLocation'].value}}">
                    </mat-form-field>
        
                    <mat-form-field appearance="standard" floatLabel="always" class="number">
                      <mat-label>
                        {{ 'pages.first_consultation.general_info_2.form.arrive_time' | translate }}
                      </mat-label>
                      <input type="number"formControlName="travelTime" matInput autocomplete="off" required
                        placeholder="{{ getChosenActivity(i).controls['travelTime'].value }}">
                    </mat-form-field>
            
                    <mat-form-field appearance="standard" floatLabel="always">
                      <mat-label>
                        {{ 'pages.first_consultation.general_info_2.form.training_intensity' | translate }}
                      </mat-label>
                      <mat-select matInput placeholder="{{ getChosenActivity(i).controls['trainingIntensity'].value }}" 
                        formControlName="trainingIntensity" panelClass="dropdown-regular" autocomplete="off" required>
                        <mat-option value="very-intense">
                          {{ 'pages.exercises.general.very_intense' | translate }}
                        </mat-option>
                        <mat-option value="intense">
                          {{ 'pages.exercises.general.intense' | translate }}
                        </mat-option>
                        <mat-option value="regular">
                          {{ 'pages.exercises.general.regular' | translate }}
                        </mat-option>
                        <mat-option value="mild">
                          {{ 'pages.exercises.general.mild' | translate }}
                        </mat-option>
                        <mat-option value="very-mild">
                          {{ 'pages.exercises.general.very_mild' | translate }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>

                  <div class="btn-area">
                    <button type="button" mat-icon-button type="button" class="delete-btn" (click)="deleteActivity(i)">
                      <i class="fa__icon fa fa-trash"></i>
                    </button>
                  </div>
                </div>

                <button type="button" class="add-form-field" (click)="addActivity()">
                  <i class="fa__icon fa fa-plus"></i>
                  {{ 'pages.first_consultation.general_info_2.buttons.add_activity' | translate }}
                </button>
              </section>
            </ng-container>
          </div>

        </section>

        <section class="big-category weekends" id="weekends">
          <h1 class="big-category__title">
            {{ 'pages.first_consultation.general_info_2.form.weekends' | translate }}
          </h1>
          <mat-form-field appearance="standard" floatLabel="always">
            <mat-label>
              {{ 'pages.first_consultation.general_info_2.form.wakeup_time' | translate }}
            </mat-label>
            <mat-select matInput placeholder="06.00" formControlName="wakeUpTime" 
            panelClass="dropdown-regular" autocomplete="off" required>
              <mat-option *ngFor="let time of times" [value]="time.value">⏰ {{time.value}}</mat-option>
            </mat-select>
            <mat-error class="input-error" *ngIf="!generalDataForm['controls'].wakeUpTime.touched">{{ 'global.form.errors.required' | translate }}</mat-error>
          </mat-form-field>


          <div class="radio-form-field">
            <label class="radio-form-label">
              {{ 'pages.first_consultation.general_info_2.form.order_food' | translate }}
            </label>
            <mat-radio-group
              class="radio-button-group"
              formControlName="orderFood">
              <mat-radio-button class="radio-button" value="yes">{{ 'global.words.yes' | translate }}</mat-radio-button>
              <mat-radio-button class="radio-button" value="no">{{ 'global.words.no' | translate }}</mat-radio-button>
            </mat-radio-group>

            <ng-container *ngIf="generalDataForm['controls'].orderFood.value === 'global.words.yes'">
              <mat-form-field appearance="standard" floatLabel="always">
                <textarea type="text" matInput formControlName="orderFoodNote" placeholder="Like what?" 
                matTextareaAutosize autofocus="off" autocomplete="off">
                </textarea>
              </mat-form-field>
            </ng-container>
          </div>
        </section>

        <section class="big-category supplements" id="supplements">
          <h1 class="big-category__title">
            {{ 'pages.first_consultation.general_info_2.form.supplements' | translate }}
          </h1>

          <div class="radio-form-field">
            <label class="radio-form-label">
              {{ 'pages.first_consultation.general_info_2.form.take_supps' | translate }}
            </label>
            <mat-radio-group
              class="radio-button-group"
              formControlName="supplements">
              <mat-radio-button class="radio-button" value="yes">{{ 'global.words.yes' | translate }}</mat-radio-button>
              <mat-radio-button class="radio-button" value="no">{{ 'global.words.no' | translate }}</mat-radio-button>
            </mat-radio-group>

            <ng-container *ngIf="generalDataForm['controls'].supplements.value === 'global.words.yes'">
              <mat-form-field appearance="standard" floatLabel="always">
                <textarea type="text" matInput formControlName="supplementNote" placeholder="What are you taking?" 
                matTextareaAutosize autofocus="off" autocomplete="off">
                </textarea>
              </mat-form-field>
            </ng-container>    
          </div>

          <div class="radio-form-field">
            <label class="radio-form-label">
              {{ 'pages.first_consultation.general_info_2.form.use_supplement' | translate }}
            </label>
            <mat-radio-group
              class="radio-button-group"
              formControlName="willingToUseSupps">
              <mat-radio-button class="radio-button" value="yes">{{ 'global.words.yes' | translate }}</mat-radio-button>
              <mat-radio-button class="radio-button" value="no">{{ 'global.words.no' | translate }}</mat-radio-button>
            </mat-radio-group>
          </div>

          <mat-form-field appearance="standard" floatLabel="always">
            <mat-label>{{ 'pages.first_consultation.general_info_2.form.eating_record' | translate }}</mat-label>
            <textarea type="text" matInput formControlName="eatingRecordatory" placeholder="{{ 'global.form.short_summary' | translate }}" 
            matTextareaAutosize autofocus="off" autocomplete="off" required>
            </textarea>
          </mat-form-field>
        </section>

      </form>

      <section class="btn-area">
        <button type="button" class="dialog-button" matStepperPrevious>{{ 'global.buttons.back' | translate }}</button>
        <button type="button" class="dialog-button" matStepperNext>{{ 'global.buttons.next' | translate }}</button>
      </section>
    </mat-step>

    <mat-step [stepControl]="noteForm">
      <ng-template matStepLabel>{{ 'global.words.notes' | translate }}</ng-template>
      
      <div class="title-area" id="notes">
        <h3>{{ 'pages.first_consultation.extra.title' | translate }}</h3>
        <p class="card-text">
          {{ 'pages.first_consultation.extra.intro' | translate }}
        </p>
      </div>

      <form [formGroup]="noteForm" class="personal-form">
        <mat-form-field appearance="standard" floatLabel="always">
          <mat-label>{{ 'pages.first_consultation.extra.notice_remember' | translate }}</mat-label>
          <textarea type="text" matInput formControlName="specialistNotes" placeholder="Write it down here" 
            matTextareaAutosize autofocus="off" autocomplete="off">
          </textarea>
        </mat-form-field>
      </form>

      <section class="btn-area">
        <button type="button" class="dialog-button" matStepperPrevious>
          {{ 'global.buttons.back' | translate }}
        </button>
        <button type="submit" class="dialog-button" (click)="EditFirstConsultation()">
          Done
        </button>
      </section>
    </mat-step>

  </mat-horizontal-stepper>
</main>
