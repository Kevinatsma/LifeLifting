<ng-container>
  <main class="specialist-wrapper">
    <form class="package-container" [formGroup]="editMealplanForm" *ngIf="editShow">
      <section class="action-toolbar-top">
        <div class="left">
          <button type="button" class="icon-button" [routerLink]="['../']">
              <i class="fas fa-arrow-left"></i>
          </button>
        </div>
        <div class="middle">
          <h1 *ngIf="client; else gID">Mealplan for: {{client.displayName}}</h1>
          <h5 *ngIf="client">Current weight: {{client.basicData.currentWeight}}kg</h5>
          <ng-template #gID>
            <h1>Mealplan ID: {{mealplan.mealplanID}}</h1>
          </ng-template>
        </div>
        <div class="right">
          <button type="button" class="icon-button edit-button hidden">
            <i class="fas fa-edit"></i>
          </button>
          <button type="submit" class="icon-button edit-button" (click)="editMealplan()" *ngIf="editShow">
            <i class="fas fa-check"></i>
          </button>
        </div>
      </section>
  
      <div class="package-container">
        <mat-card class="list-item-card" *ngIf="mealplan">
            <section *ngIf="client" class="card-circle" (click)="linkToChild(mealplan, client)" [style.background]="'url('+ client.photoURL +')'">
            </section>
            <section class="chip-area">
              <p class="secondary-chip">
                Mealplan number: {{mealplan.mealplanNR}}
              </p>
              <p class="secondary-chip">
                Created: {{mealplan.creationDate.toDate() | date: 'MM/dd/yy'}}
              </p>
              <p *ngIf="mealplan.lastEdited" class="secondary-chip">
                Last edited: {{mealplan.lastEdited.toDate() | date: 'M/d/yy, h:mm a'}}
              </p>
            </section>
  
            <section class="introduction">
              <h2>
                <input type="text" class="text-field" name="mealplanName" formControlName="mealplanName">
              </h2>
              <h5>
                gID: {{mealplan.mealplanID}}
              </h5>
            </section>
  
            <section class="mealplan-targets" *ngIf="mealplan">
              <h2 class="section-title">Mealplan targets</h2>
              <div class="target-container">
                <div class="target-container__left">
                  <div class="target-block">
                    <h6 class="target-block__title">Ideal weight</h6>
                    <span class="target-block__value">
                      <input type="number" class="text-field" name="idealWeight" formControlName="idealWeight"> kg
                    </span>
                  </div>
                  <div class="target-block">
                    <h6 class="target-block__title">Amount of 
                      <ng-container *ngIf="selectedTarget">
                        {{gainWeight}}
                      </ng-container>
                    </h6>
                    <span class="target-block__value">
                      <input type="number" class="text-field" name="totalTarget" formControlName="totalTarget"> kg
                    </span>
                  </div>
                  <div class="target-block" *ngIf="mealplan.idealKiloOfMuscle">
                    <h6 class="target-block__title">Ideal Kg of muscle</h6>
                    <span class="target-block__value">
                      <input type="number" class="text-field" name="idealKiloOfMuscle" formControlName="idealKiloOfMuscle"> kg
                    </span>
                  </div>
                  <div class="target-block" *ngIf="mealplan.mealplanDuration">
                    <h6 class="target-block__title">Total duration</h6>
                    <span class="target-block__value">
                      <input type="number" class="text-field" name="mealplanDuration" formControlName="mealplanDuration"> weeks
                    </span>
                  </div>
                </div>
  
                <div class="target-container__right">
                  <div class="icon-circle">
                    <i class="fas fa-question"></i>
                  </div>
                  <mat-select matInput placeholder="{{mealplan.target}} weight" [class.dropdown-edit]="mealplan.target" [(value)]="selectedTarget" 
                  autocomplete="off" panelClass="dropdown-edit" required (selectionChange)="toggleGainWeight(selectedTarget)">
                    <mat-option *ngFor="let target of targets" [value]="target.value">{{target.viewValue}}</mat-option>
                  </mat-select>
                </div>
              </div>
            </section>
  
            <section class="calorie-metrics" *ngIf="mealplan">
              <div class="metric">
                <span class="metric__value">
                <input type="text" class="text-field metric__value" name="increaseAmount" formControlName="increaseAmount"></span>
                <h6 class="metric__title">
                  Kcal Increase/decrease
                </h6>
              </div>
              <div class="metric">
                <div class="icon-circle">
                  <i class="fas fa-question"></i>
                </div>
                <h6 class="metric__title">
                  <mat-select matInput placeholder="{{mealplan.increaseCalories}} calories" [class.dropdown-cals]="mealplan.increaseCalories" 
                  [(value)]="selectedBasalValue" autocomplete="off" panelClass="dropdown-edit" required>
                    <mat-option *ngFor="let value of basalValues" [value]="value.value">{{value.viewValue}}</mat-option>
                  </mat-select>
                  from the basal metabolism
                </h6>
              </div>
              <div class="metric">
                <span class="metric__value">
                  x
                  <input type="number" class="metric__value" name="factorCalorie" formControlName="factorCalorie">
                </span>
                <h6 class="metric__title">Factor Calorie</h6>
              </div>
            </section>
            
            <section class="mealplan-activities" *ngIf="exercise">
              <h2 class="section-title">Activities and Macros</h2>
              <!-- <h2>ID: {{exercise.exerciseID}}</h2> -->
              <div class="activity">
                <app-exercise-list-item class="activity__left" [exercise]="exercise"></app-exercise-list-item>
                <div class="activity__right">
                  <div class="target-block" *ngIf="mealplan.activityPerWeek">
                    <h6 class="target-block__title">Per week</h6>
                    <span class="target-block__value">{{mealplan.activityPerWeek}}x</span>
                  </div>
                  <div class="target-block" *ngIf="mealplan.activityDuration">
                    <h6 class="target-block__title">How long</h6>
                    <span class="target-block__value">{{mealplan.activityDuration}} min</span>
                  </div>
                  <div class="target-block__full-width">
                    <h6 class="target-block__title">Macros</h6>
                    <ul>
                      <li *ngFor="let macro of mealplan.macroDistribution">
                        <span class="percentage">
                          {{macro.percentage}}%
                        </span>
                        <h4>{{macro.macroValue}}</h4>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
            </section>
                      
            <section class="macro-metrics macros" *ngIf="mealplan">
              <h2 class="section-title">
                Macro Distribution
              </h2>
              <div class="container">
                <div class="metric">
                  <div class="icon-circle">
                    <input type="number" name="proteinValue" formControlName="proteinValue">
                    %
                  </div>
                  <h6 class="metric__title">
                    Protein
                  </h6>
                </div>
                <div class="metric">
                  <div class="icon-circle">
                    <input type="number" name="carbValue" formControlName="carbValue">
                    %
                  </div>
                  <h6 class="metric__title">
                    Carbohydrates
                  </h6>
                </div>
                <div class="metric">
                  <div class="icon-circle">
                      <input type="number" name="fatValue" formControlName="fatValue">
                      %
                  </div>
                  <h6 class="metric__title">
                    Fat
                  </h6>
                </div>
              </div>
            </section>
        </mat-card>
      </div>
    </form>
    </main>
</ng-container>
<!-- <ng-container *ngIf="mealplan">
  <main>
      <form class="package-container" [formGroup]="editMealplanForm" *ngIf="editShow">

        <mat-card class="list-item-card" *ngIf="mealplan">
            <section *ngIf="client" class="card-circle" (click)="linkToChild(mealplan, client)" [style.background]="'url('+ client.photoURL +')'">
            </section>
            <section class="chip-area">
              <p class="secondary-chip">
                Mealplan number: {{mealplan.productNR}}
              </p>
              <p class="secondary-chip">
                Created: {{mealplan.creationDate.toDate() | date: 'MM/dd/yy'}}
              </p>
              <p *ngIf="mealplan.lastEdited" class="secondary-chip">
                Last edited: {{mealplan.lastEdited.toDate() | date: 'M/d/yy, h:mm a'}}
              </p>
            </section>
            <section class="middle">
              <div class="title">
                  <h2><input type="text" class="text-field" name="productName" formControlName="productName"></h2>
              </div>
          
              <div class="quick-info">
                <p class="speciality-title">Mealplan ID: {{mealplan.productID}}</p>
                <ul class="contact-menu">
                   <li>
                    <i class="fas fa-balance-scale"></i>
                    <input type="number" class="text-field half" name="amount" formControlName="amount">
                    <input type="text" class="text-field half" name="unit" formControlName="unit">
                  </li> 
                </ul>
              </div>
            </section>        
          </mat-card>
    </form>

  </main> 
</ng-container> -->