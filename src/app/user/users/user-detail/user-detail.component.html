<ng-container *ngIf="user">
  <main class="specialist-wrapper" *ngIf="!editShow">

    <section class="action-toolbar-top">
      <div class="left">
        <button class="icon-button" (click)="goBack()">
            <i class="fa__icon fas fa-arrow-left"></i>
        </button>
      </div>
      <div class="right">
        <button class="icon-button" (click)="chat()">
          <i class="fa__icon fas fa-comment-alt"></i>
        </button>

        <button class="icon-button edit-button" (click)="toggleEdit()">
          <i class="fa__icon fas fa-edit"></i>
        </button>

      </div>
    </section>

    <ng-container *ngIf="!editShow">
      <section class="specialist-header">
        <div class="profile-picture" [style.backgroundImage]="'url('+ user.photoURL +')'">
          <span *ngIf="!user.photoURL">{{ 'global.errors.no_photo' | translate }}</span>
        </div>
        <div class="quick-info">
          <p class="timezone">
              <ng-container *ngIf="user.roles.admin">
                {{ 'global.words.admin' | translate }}
                <ng-container *ngIf="user.roles.specialist || user.roles.client">, </ng-container>
              </ng-container>
              <ng-container *ngIf="user.roles.specialist">
                {{ 'global.words.specialist' | translate }}
                <ng-container *ngIf="user.roles.client">, </ng-container>
              </ng-container>
              <ng-container *ngIf="user.roles.client">
                {{ 'global.words.client' | translate }}
              </ng-container>
          </p>
          <div class="top">
          <h2>{{user.displayName}}</h2>
          <h5 *ngIf="user.basicData">{{user.basicData.country}}</h5>
          <h5 *ngIf="!user.basicData">
            {{ 'pages.users.detail.errors.no_country' | translate }}
          </h5>
          <p class="uid"><span class="not-mobile">
            {{'pages.client.general.user_id' | translate }}:</span>{{user.uid}}</p>
          <div class="icon-fact-container">
            <div class="fact" *ngIf="user.basicData">
              <i class="fa__icon fas fa-transgender"></i>
              <span>{{user.basicData.gender}}</span>
            </div>
            <div class="fact" *ngIf="!user.basicData">
              <i class="fa__icon fas fa-transgender"></i>
              <span>{{ 'global.errors.no_value' | translate }}</span>
            </div>
            <div class="fact" *ngIf="specialist">
              <i class="fa__icon fas fa-user-ninja"></i>
              <span>{{specialist.firstName}} {{specialist.lastName}}</span>
            </div>
            <div class="fact" *ngIf="!specialist">
              <i class="fa__icon fas fa-user-ninja"></i>
              <span>{{ 'global.errors.no_value' | translate }}</span>
            </div>
          </div>


          </div>
          <div class="bottom">
            <p class="tab">
              <span *ngIf="user.packageChoice">{{user.packageChoice}}</span>
              <span *ngIf="!user.packageChoice">{{ 'global.words.none' | translate }}</span>
              {{ 'pages.client.general.package_choice' | translate }}
            </p>
            <p class="tab" *ngIf="user.basicData">
              <span>
                {{user.basicData.age}}
              </span>{{ 'global.words.age' | translate }}
            </p>
            <p class="tab" *ngIf="!user.basicData">
              <span>
                {{ 'global.words.none' | translate }}
              </span>{{ 'global.words.age' | translate }}
            </p>
          </div>
        </div>
      </section>

      <section class="about">
        <h5>{{user.displayName}}'s {{ 'pages.client.general.main_goal' | translate }}</h5>
        <p [class.read-more]="aboutExtended" [class.has-read-more]="hasReadMore" *ngIf="user.basicData">
          {{user.basicData.mainGoal}}
        </p>
        <p [class.read-more]="aboutExtended" [class.has-read-more]="hasReadMore" *ngIf="!user.basicData">
          {{ 'pages.client.general.errors.no_goal' | translate }}
        </p>
        <ng-container *ngIf="user.basicData && user.basicData.mainGoal && hasReadMore">
          <button class="text-link" (click)="aboutExtendedOpen()" *ngIf="!aboutExtended">
            <i class="fa__icon fas fa-plus"></i>
            {{ 'global.buttons.read_more' | translate }}
          </button>
          <button class="text-link" (click)="aboutExtendedClose()" *ngIf="aboutExtended">
            <i class="fa__icon fas fa-minus"></i>
            {{ 'global.buttons.read_less' | translate }}
          </button>
        </ng-container>
      </section>

      <section class="middle">
        <div class="contact-info">
          <h5 class="purple">{{ 'pages.client.general.contact_info' | translate }}</h5>
          <ul class="contact-menu">
            <li>
              <i class="fa__icon far fa-envelope"></i>
              <a class="text-link" href="mailto:{{user.email}}" *ngIf="user.basicData">
                {{user.email}}
              </a>
              <p class="card-text" *ngIf="!user.basicData">
                {{ 'pages.client.general.errors.no_email' | translate }}
              </p>
            </li>
            <li>
              <i class="fa__icon fas fa-mobile-alt"></i>
              <a class="text-link"  *ngIf="user.basicData" href="tel:{{user.basicData.phoneNumber}}">
                {{user.basicData.phoneNumber}}
              </a>
              <p class="card-text" *ngIf="!user.basicData">
                {{ 'pages.client.general.errors.no_phone' | translate }}
              </p>
            </li>
            <li>
              <i class="fa__icon far fa-comment-alt"></i>
              <button class="text-link" *ngIf="user.basicData" (click)="chat()">
                {{ 'global.actions.chat' | translate }}
              </button>
              <p class="card-text" *ngIf="!user.basicData">
                {{ 'pages.client.general.errors.no_basic_data' | translate }}
              </p>
            </li>
          </ul>
        </div>
        <div class="languages">
          <h5 class="purple">
            {{ 'pages.client.general.practical_info' | translate }}
          </h5>
          <ul>
            <li>{{ 'pages.client.general.heard_from_us' | translate }}:
              <ng-container *ngIf="user.basicData">
                <strong>{{ (user.basicData.heardFromUs) | translate }}</strong>
              </ng-container>
              <ng-container *ngIf="!user.basicData">
                <strong>{{ 'pages.client.general.errors.not_filled' | translate }}</strong>
              </ng-container>
            </li>
            <li>{{ 'pages.client.general.signup_completed' | translate }}?
              <ng-container *ngIf="user?.status?.signUpCompleted">
                <strong>{{ 'global.words.yes' | translate }}</strong>
              </ng-container>
              <ng-container *ngIf="!user?.status?.signUpCompleted">
                <strong>{{ 'global.words.no' | translate }}</strong>
              </ng-container>
            </li>
          </ul>
        </div>
      </section>

      <app-first-consultation-list [client]="user" [firstConsultations]="firstConsultations" *ngIf="firstConsultations">
      </app-first-consultation-list>

      <app-measurement-list [client]="user" [measurements]="measurements" *ngIf="measurements"></app-measurement-list>

      <h1 class="section-title guideline-title">
        {{ 'pages.guideline.title' | translate }}
      </h1>
      <section class="guidelines" *ngIf="hasGuidelines">
        <div class="guidelines__container">
          <app-guideline-list-item *ngFor="let guideline of guidelines" [guideline]="guideline"></app-guideline-list-item>
          <div class="guidelines__container__filler">
            Filler
          </div>
        </div>
      </section>

      <h1 class="section-title guideline-title">
        {{ 'pages.mealplan.title' | translate }}
      </h1>
      <section class="guidelines" *ngIf="hasMealplans">
        <div class="guidelines__container">
          <app-mealplan-list-item *ngFor="let mealplan of mealplans" [mealplan]="mealplan"></app-mealplan-list-item>
          <div class="guidelines__container__filler">
            Filler
          </div>
        </div>
      </section>

      <app-follow-up-list [client]="user" [followUps]="followUps" *ngIf="followUps"></app-follow-up-list>

      <ng-container *ngIf="auth.user | async as user$">
      <section class="switches" *ngIf="user$.roles.admin">
        <h1 class="section-title">
          {{ 'global.user.status.title' | translate }}
        </h1>
        <div class="switch-container">
          <div>
            <h3>{{ 'global.user.status.general' | translate }}</h3>
            <div class="switch">
              <p class="card-text" *ngIf="user?.status?.signUpCompleted">
                <i class="fa__icon fas fa-check-circle"></i>
                {{ 'global.user.status.signup_completed' | translate }}
              </p>
              <p class="card-text" *ngIf="!user?.status?.signUpCompleted">
                <i class="fa__icon fas fa-ban"></i>
                {{ 'global.user.status.signup_incomplete' | translate }}
              </p>

              <p class="card-text" *ngIf="user?.status?.accepted">
                <i class="fa__icon fas fa-check-circle"></i>
                {{ 'global.user.status.accepted' | translate }}
              </p>
              <p class="card-text" *ngIf="!user?.status?.accepted">
                <i class="fa__icon fas fa-ban"></i>
                {{ 'global.user.status.denied' | translate }}
              </p>

              <p class="card-text" *ngIf="!user?.status?.subscriptionValid">
                <i class="fa__icon fas fa-ban"></i>
                {{ 'global.user.status.subscription_invalid' | translate }}
              </p>
              <p class="card-text" *ngIf="user?.status?.subscriptionValid">
                <i class="fa__icon fas fa-check-circle"></i>
                {{ 'global.user.status.subscription_valid' | translate }}
              </p>
            </div>
          </div>
          <div>
            <h3 class="section-title">
              {{ 'global.user.status.appointment' | translate }}
            </h3>
            <div class="switch">
              <p class="card-text" *ngIf="user?.status?.appointment">
                <i class="fa__icon fas fa-check-circle"></i>
                {{ 'global.user.status.appointment_requested' | translate }}
              </p>
              <p class="card-text" *ngIf="!user?.status?.appointment">
                <i class="fa__icon fas fa-ban"></i>
                {{ 'global.user.status.appointment_not_requested' | translate }}
              </p>

              <p class="card-text" *ngIf="user?.status?.appointmentAccepted">
                <i class="fa__icon fas fa-check-circle"></i>
                {{ 'global.user.status.appointment_accepted' | translate }}
              </p>
              <p class="card-text" *ngIf="!user?.status?.appointmentAccepted">
                <i class="fa__icon fas fa-ban"></i>
                {{ 'global.user.status.appointment_not_accepted' | translate }}
              </p>

              <p class="card-text" *ngIf="user?.status?.appointmentCompleted">
                <i class="fa__icon fas fa-check-circle"></i>
                {{ 'global.user.status.appointment_completed' | translate }}
              </p>
              <p class="card-text" *ngIf="!user?.status?.appointmentCompleted">
                <i class="fa__icon fas fa-ban"></i>
                {{ 'global.user.status.appointment_not_completed' | translate }}
              </p>
            </div>
          </div>
        </div>
      </section>
      </ng-container>

    </ng-container>

  </main>

  <ng-container *ngIf="editShow">
    <app-edit-user [user]="user"></app-edit-user>
  </ng-container>

</ng-container>

<ng-container *ngIf="!user">
  <app-loading-spinner></app-loading-spinner>
</ng-container>
