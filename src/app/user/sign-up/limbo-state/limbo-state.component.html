<main class="limbo-container" *ngIf="auth.user | async as user">
  <ng-container *ngIf="user.status.appointment && !user.status.appointmentAccepted && !user.status.appointmentCompleted">
    <div class="step-done">
      <h1>Cheers to planning that in! üçª</h1>
      <p class="intro-text">
        Congrats on looking for a better version of yourself. Thank you for your trust in <b>LifeLifting Nutrition</b>.
        <br>
        <a class="text-link" (click)="toggleSpecialist()">Your specialist</a>
        will confirm your consultation as soon as possible. 
      </p>
    </div>
  </ng-container>

  <ng-container *ngIf="user.status.appointment && user.status.appointmentAccepted && !user.status.appointmentCompleted">
    <h1> Appointment accepted! </h1>
    <p class="subtitle" *ngIf="specialist">
      But it hasn't taken place, or isn't processed by the specialist yet. Please contact 
      <a class="text-link" (click)="toggleSpecialist()">
        {{specialist.firstName}} {{specialist.lastName}} 
      </a>
      if you have any trouble, or for any further questions.
    </p>
    
    <section class="appointments" *ngIf="events">
      <app-appointment-detail *ngFor="let event of events" [event]="event"></app-appointment-detail>
    </section>
  </ng-container>

  <ng-container *ngIf="user.status.appointmentAccepted && user.status.appointmentCompleted && !user.status.accepted">
    <div class="step-done">
      <h1>Nice, you completed your first appointment!</h1>
      <p class="subtitle" *ngIf="specialist">
        But your payment hasn't been processed yet. Make sure you've paid. Don't hesitate contacting
        <a class="text-link" (click)="toggleSpecialist()">
          {{specialist.firstName}} {{specialist.lastName}} 
        </a>
        if you have any trouble
        with your payment, or for any further questions.
      </p>
    </div>
  </ng-container>

  <ng-container *ngIf="user.status.subscriptionEnded">
    <div class="step-done">
      <h1>Aww.. Your subscription has ended</h1>
      <p class="subtitle" *ngIf="specialist">
        We hope you had an awesome growth in your time with LifeLifting. And you're always welcome to train with
        <a class="text-link" (click)="toggleSpecialist()">
          {{specialist.firstName}} {{specialist.lastName}} 
        </a>
        or you can choose 
        <a class="text-link" (click)="resetSpecialist(user)">
          another specialist.
        </a>
      </p>
    </div>
  </ng-container>

  <ng-container *ngIf="
  !user.status.subscriptionEnded &&
  user.status.accepted &&
  user.status.appointmentAccepted &&
  user.status.appointmentCompleted &&
  user.status.appointment">

    <div class="step-done">
      <h1>Looks like everything is ok!</h1>
      <p class="subtitle" *ngIf="specialist">
        You've completed all the steps. Click the button below to continue to the dashboard.
      </p>
      <div class="btn-area">
        <button class="btn-icon-right"
          [class.btn-disabled]="user.status && !user.status.appointment"
          [disabled]="user.status && !user.status.appointment"
          routerLink="../../dashboard">
          <span>Go to the dashboard!</span>
          <span class="emoji">üöÄ</span>
        </button>
      </div>
    </div>
  </ng-container>

  <section class="specialist-container" [class.active]="showSpecialist">
    <button class="hide-btn" (click)="toggleSpecialist()" *ngIf="showSpecialist">
      <i class="fas fa-chevron-down"></i>
    </button>
    <app-specialist-detail [specialist]="specialist" *ngIf="showSpecialist">
    </app-specialist-detail>
  </section>
</main>
