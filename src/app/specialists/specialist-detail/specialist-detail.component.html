<ng-container *ngIf="specialist && auth.user | async as user">
  <main class="specialist-wrapper" *ngIf="!editShow">
    <section class="action-toolbar-top">
      <div class="left">
        <button class="icon-button" (click)="goBack()" *ngIf="user.status.accepted">
            <i class="fa__icon fas fa-arrow-left"></i>
        </button>
        <a class="icon-button" href="tel:{{specialist.phoneNumber}}" *ngIf="!user.status.accepted">
            <i class="fa__icon fas fa-phone"></i>
        </a>
      </div>
      <div class="right">
        <button class="icon-button" href="#" *ngIf="!editShow" (click)="chat()">
          <i class="fa__icon fas fa-comment-alt"></i>
        </button>

        <button class="icon-button edit-button" (click)="toggleEdit()" *ngIf="!editShow && user.roles.admin">
          <i class="fa__icon fas fa-edit"></i>
        </button>

        <button class="icon-button edit-button" (click)="openReviewDialog(specialist)" *ngIf="!editShow &&  user.status.canReview">
          <i class="fa__icon fas fa-star"></i>
        </button>
      </div>
    </section>

    <ng-container *ngIf="!editShow">
      <section class="specialist-header">
        <div class="profile-picture" [style.backgroundImage]="'url('+ specialist.photoURL +')'">

        </div>
        <div class="quick-info">
          <p class="timezone">Timezone: {{specialist.timeZone}}</p>
          <div class="top">
          <h2>{{specialist.firstName}} {{specialist.lastName}}</h2>
          <h5>{{specialist.position}}</h5>
          <p>Speciality: {{specialist.speciality}}</p>
          <div class="icon-fact-container">
            <div class="fact">
              <i class="fa__icon fas fa-globe-americas"></i> 
              <span>{{specialist.country}}</span>
            </div>
            <div class="fact">
              <i class="fa__icon fas fa-city"></i>
              <span>{{specialist.city}} </span>
            </div>
          </div>
          </div>
          <div class="bottom">
            <p class="tab">
              <span>{{specialist.patientsTotal}}</span>Clients or Patients
            </p>
            <p class="tab">
              <span>{{specialist.yearsOfExperience}}</span>Years of experience
            </p>
          </div>
        </div>
      </section>

      <section class="about">  
        <h5>About {{specialist.firstName}}</h5>
        <p [class.read-more]="aboutExtended">{{specialist.description}}</p>
        <button class="text-link" (click)="aboutExtendedOpen()" *ngIf="!aboutExtended">
          <i class="fa__icon fas fa-plus"></i>
          Read More
        </button>
        <button class="text-link" (click)="aboutExtendedClose()" *ngIf="aboutExtended">
          <i class="fa__icon fas fa-minus"></i>
          Read Less
        </button>
      </section>

      <section class="middle">
        <div class="contact-info">
          <h5 class="purple">Contact Info</h5>
          <ul class="contact-menu">
            <li>
              <i class="fa__icon far fa-envelope"></i>
              <a class="text-link" href="mailto:{{specialist.email}}">
                {{specialist.email}}
              </a>
            </li>
            <li>
              <i class="fa__icon fas fa-mobile-alt"></i>
              <a class="text-link" href="tel:{{specialist.phoneNumber}}">
                {{specialist.phoneNumber}}
              </a>
            </li>
            <li>
              <i class="fa__icon far fa-comment-alt"></i>
              <a class="text-link" (click)="chat()">
                Chat
              </a>
            </li>
          </ul>
        </div>
        <div class="languages">
          <h5 class="purple">Languages</h5>
          <ul>
            <li *ngFor="let language of specialist.languages"><strong>{{language.languageValue}}</strong> - {{language.languageLevel}}</li>
          </ul>
        </div>
      </section>
    </ng-container>

    <ng-container *ngIf="!editShow && reviews | async as reviews">
        <section class="reviews-opened">
          <h5 class="purple">Reviews</h5>
          <div class="review-container" *ngIf="reviewsVisible">
            <app-review-list-item *ngFor="let review of reviews" [review]="review" [specialist]="specialist">
            </app-review-list-item>
            <div class="placeholder">
              Oh hello there.
            </div>
          </div>
        </section>
      
        <section class="btn-area" *ngIf="reviews.length > 0">
          <button class="text-link" *ngIf="!reviewsVisible" (click)="openReviews()">
            Show reviews
            <i class="fa__icon fas fa-chevron-down"></i>
          </button>
          <button class="text-link" *ngIf="reviewsVisible" (click)="closeReviews()">
            Hide reviews
            <i class="fa__icon fas fa-chevron-up"></i>
          </button>
        </section>
    </ng-container>
  </main>
  <app-edit-specialist *ngIf="editShow" [specialist]="specialist"></app-edit-specialist>
</ng-container>
  
<ng-container *ngIf="!specialist">
  <app-loading-spinner></app-loading-spinner>
</ng-container>
